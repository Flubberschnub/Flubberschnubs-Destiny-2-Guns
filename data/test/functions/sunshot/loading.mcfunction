##loading
scoreboard players add @a[tag=reloading] reloadtimer 1
execute as @a[tag=reloading] as @s[nbt={SelectedItem:{id:"minecraft:carrot_on_a_stick",Count:1b,tag:{gun:1,sunshot:1}}}] if score @s reloadtimer matches ..30 run schedule function test:sunshot/scheduleloading 1t append
execute as @a[tag=reloading] if score @s reloadtimer matches 31.. run function test:sunshot/fullmag
execute as @a[tag=reloading] if score @s reloadtimer matches 31.. run tag @s remove reloading
execute as @a[nbt={SelectedItem:{id:"minecraft:carrot_on_a_stick",Count:1b,tag:{gun:1,sunshot:1}}}] if score @s reloadtimer matches 31.. run function test:sunshot/resetads
execute as @a if score @s reloadtimer matches 31.. run scoreboard players reset @s reloadtimer

##animation
execute as @a[tag=reloading,nbt={SelectedItem:{id:"minecraft:carrot_on_a_stick",Count:1b,tag:{gun:1,sunshot:1}}}] if score @s reloadtimer matches 1 run replaceitem entity @s weapon.mainhand minecraft:carrot_on_a_stick{display:{Name:'{"text":"Sunshot","color":"yellow","bold":true,"italic":false}',Lore:['{"text":"\\"Can\'t outrun the sunrise.\\"","color":"gray","italic":true}','{"text":"-Liu Feng","color":"gray","italic":true}']},Unbreakable:1b,CustomModelData:24,gun:1,sunshot:1} 1
execute as @a[tag=reloading,nbt={SelectedItem:{id:"minecraft:carrot_on_a_stick",Count:1b,tag:{gun:1,sunshot:1}}}] if score @s reloadtimer matches 2 run replaceitem entity @s weapon.mainhand minecraft:carrot_on_a_stick{display:{Name:'{"text":"Sunshot","color":"yellow","bold":true,"italic":false}',Lore:['{"text":"\\"Can\'t outrun the sunrise.\\"","color":"gray","italic":true}','{"text":"-Liu Feng","color":"gray","italic":true}']},Unbreakable:1b,CustomModelData:25,gun:1,sunshot:1} 1
execute as @a[tag=reloading,nbt={SelectedItem:{id:"minecraft:carrot_on_a_stick",Count:1b,tag:{gun:1,sunshot:1}}}] if score @s reloadtimer matches 3 run replaceitem entity @s weapon.mainhand minecraft:carrot_on_a_stick{display:{Name:'{"text":"Sunshot","color":"yellow","bold":true,"italic":false}',Lore:['{"text":"\\"Can\'t outrun the sunrise.\\"","color":"gray","italic":true}','{"text":"-Liu Feng","color":"gray","italic":true}']},Unbreakable:1b,CustomModelData:26,gun:1,sunshot:1} 1
execute as @a[tag=reloading,nbt={SelectedItem:{id:"minecraft:carrot_on_a_stick",Count:1b,tag:{gun:1,sunshot:1}}}] if score @s reloadtimer matches 4 run replaceitem entity @s weapon.mainhand minecraft:carrot_on_a_stick{display:{Name:'{"text":"Sunshot","color":"yellow","bold":true,"italic":false}',Lore:['{"text":"\\"Can\'t outrun the sunrise.\\"","color":"gray","italic":true}','{"text":"-Liu Feng","color":"gray","italic":true}']},Unbreakable:1b,CustomModelData:27,gun:1,sunshot:1} 1
execute as @a[tag=reloading,nbt={SelectedItem:{id:"minecraft:carrot_on_a_stick",Count:1b,tag:{gun:1,sunshot:1}}}] if score @s reloadtimer matches 5 run replaceitem entity @s weapon.mainhand minecraft:carrot_on_a_stick{display:{Name:'{"text":"Sunshot","color":"yellow","bold":true,"italic":false}',Lore:['{"text":"\\"Can\'t outrun the sunrise.\\"","color":"gray","italic":true}','{"text":"-Liu Feng","color":"gray","italic":true}']},Unbreakable:1b,CustomModelData:28,gun:1,sunshot:1} 1
execute as @a[tag=reloading,nbt={SelectedItem:{id:"minecraft:carrot_on_a_stick",Count:1b,tag:{gun:1,sunshot:1}}}] if score @s reloadtimer matches 6 run replaceitem entity @s weapon.mainhand minecraft:carrot_on_a_stick{display:{Name:'{"text":"Sunshot","color":"yellow","bold":true,"italic":false}',Lore:['{"text":"\\"Can\'t outrun the sunrise.\\"","color":"gray","italic":true}','{"text":"-Liu Feng","color":"gray","italic":true}']},Unbreakable:1b,CustomModelData:29,gun:1,sunshot:1} 1
execute as @a[tag=reloading,nbt={SelectedItem:{id:"minecraft:carrot_on_a_stick",Count:1b,tag:{gun:1,sunshot:1}}}] if score @s reloadtimer matches 7 run replaceitem entity @s weapon.mainhand minecraft:carrot_on_a_stick{display:{Name:'{"text":"Sunshot","color":"yellow","bold":true,"italic":false}',Lore:['{"text":"\\"Can\'t outrun the sunrise.\\"","color":"gray","italic":true}','{"text":"-Liu Feng","color":"gray","italic":true}']},Unbreakable:1b,CustomModelData:30,gun:1,sunshot:1} 1
execute as @a[tag=reloading,nbt={SelectedItem:{id:"minecraft:carrot_on_a_stick",Count:1b,tag:{gun:1,sunshot:1}}}] if score @s reloadtimer matches 8 run replaceitem entity @s weapon.mainhand minecraft:carrot_on_a_stick{display:{Name:'{"text":"Sunshot","color":"yellow","bold":true,"italic":false}',Lore:['{"text":"\\"Can\'t outrun the sunrise.\\"","color":"gray","italic":true}','{"text":"-Liu Feng","color":"gray","italic":true}']},Unbreakable:1b,CustomModelData:31,gun:1,sunshot:1} 1
execute as @a[tag=reloading,nbt={SelectedItem:{id:"minecraft:carrot_on_a_stick",Count:1b,tag:{gun:1,sunshot:1}}}] if score @s reloadtimer matches 9 run replaceitem entity @s weapon.mainhand minecraft:carrot_on_a_stick{display:{Name:'{"text":"Sunshot","color":"yellow","bold":true,"italic":false}',Lore:['{"text":"\\"Can\'t outrun the sunrise.\\"","color":"gray","italic":true}','{"text":"-Liu Feng","color":"gray","italic":true}']},Unbreakable:1b,CustomModelData:32,gun:1,sunshot:1} 1
execute as @a[tag=reloading,nbt={SelectedItem:{id:"minecraft:carrot_on_a_stick",Count:1b,tag:{gun:1,sunshot:1}}}] if score @s reloadtimer matches 10 run replaceitem entity @s weapon.mainhand minecraft:carrot_on_a_stick{display:{Name:'{"text":"Sunshot","color":"yellow","bold":true,"italic":false}',Lore:['{"text":"\\"Can\'t outrun the sunrise.\\"","color":"gray","italic":true}','{"text":"-Liu Feng","color":"gray","italic":true}']},Unbreakable:1b,CustomModelData:33,gun:1,sunshot:1} 1
execute as @a[tag=reloading,nbt={SelectedItem:{id:"minecraft:carrot_on_a_stick",Count:1b,tag:{gun:1,sunshot:1}}}] if score @s reloadtimer matches 11 run replaceitem entity @s weapon.mainhand minecraft:carrot_on_a_stick{display:{Name:'{"text":"Sunshot","color":"yellow","bold":true,"italic":false}',Lore:['{"text":"\\"Can\'t outrun the sunrise.\\"","color":"gray","italic":true}','{"text":"-Liu Feng","color":"gray","italic":true}']},Unbreakable:1b,CustomModelData:34,gun:1,sunshot:1} 1
execute as @a[tag=reloading] if score @s reloadtimer matches 12 run replaceitem entity @s weapon.mainhand minecraft:carrot_on_a_stick{display:{Name:'{"text":"Sunshot","color":"yellow","bold":true,"italic":false}',Lore:['{"text":"\\"Can\'t outrun the sunrise.\\"","color":"gray","italic":true}','{"text":"-Liu Feng","color":"gray","italic":true}']},Unbreakable:1b,CustomModelData:35,gun:1,sunshot:1} 1
execute as @a[tag=reloading,nbt={SelectedItem:{id:"minecraft:carrot_on_a_stick",Count:1b,tag:{gun:1,sunshot:1}}}] if score @s reloadtimer matches 13 run replaceitem entity @s weapon.mainhand minecraft:carrot_on_a_stick{display:{Name:'{"text":"Sunshot","color":"yellow","bold":true,"italic":false}',Lore:['{"text":"\\"Can\'t outrun the sunrise.\\"","color":"gray","italic":true}','{"text":"-Liu Feng","color":"gray","italic":true}']},Unbreakable:1b,CustomModelData:36,gun:1,sunshot:1} 1
execute as @a[tag=reloading,nbt={SelectedItem:{id:"minecraft:carrot_on_a_stick",Count:1b,tag:{gun:1,sunshot:1}}}] if score @s reloadtimer matches 14 run replaceitem entity @s weapon.mainhand minecraft:carrot_on_a_stick{display:{Name:'{"text":"Sunshot","color":"yellow","bold":true,"italic":false}',Lore:['{"text":"\\"Can\'t outrun the sunrise.\\"","color":"gray","italic":true}','{"text":"-Liu Feng","color":"gray","italic":true}']},Unbreakable:1b,CustomModelData:37,gun:1,sunshot:1} 1
execute as @a[tag=reloading,nbt={SelectedItem:{id:"minecraft:carrot_on_a_stick",Count:1b,tag:{gun:1,sunshot:1}}}] if score @s reloadtimer matches 15 run replaceitem entity @s weapon.mainhand minecraft:carrot_on_a_stick{display:{Name:'{"text":"Sunshot","color":"yellow","bold":true,"italic":false}',Lore:['{"text":"\\"Can\'t outrun the sunrise.\\"","color":"gray","italic":true}','{"text":"-Liu Feng","color":"gray","italic":true}']},Unbreakable:1b,CustomModelData:38,gun:1,sunshot:1} 1
execute as @a[tag=reloading,nbt={SelectedItem:{id:"minecraft:carrot_on_a_stick",Count:1b,tag:{gun:1,sunshot:1}}}] if score @s reloadtimer matches 16 run replaceitem entity @s weapon.mainhand minecraft:carrot_on_a_stick{display:{Name:'{"text":"Sunshot","color":"yellow","bold":true,"italic":false}',Lore:['{"text":"\\"Can\'t outrun the sunrise.\\"","color":"gray","italic":true}','{"text":"-Liu Feng","color":"gray","italic":true}']},Unbreakable:1b,CustomModelData:39,gun:1,sunshot:1} 1
execute as @a[tag=reloading,nbt={SelectedItem:{id:"minecraft:carrot_on_a_stick",Count:1b,tag:{gun:1,sunshot:1}}}] if score @s reloadtimer matches 17 run replaceitem entity @s weapon.mainhand minecraft:carrot_on_a_stick{display:{Name:'{"text":"Sunshot","color":"yellow","bold":true,"italic":false}',Lore:['{"text":"\\"Can\'t outrun the sunrise.\\"","color":"gray","italic":true}','{"text":"-Liu Feng","color":"gray","italic":true}']},Unbreakable:1b,CustomModelData:40,gun:1,sunshot:1} 1
execute as @a[tag=reloading,nbt={SelectedItem:{id:"minecraft:carrot_on_a_stick",Count:1b,tag:{gun:1,sunshot:1}}}] if score @s reloadtimer matches 18 run replaceitem entity @s weapon.mainhand minecraft:carrot_on_a_stick{display:{Name:'{"text":"Sunshot","color":"yellow","bold":true,"italic":false}',Lore:['{"text":"\\"Can\'t outrun the sunrise.\\"","color":"gray","italic":true}','{"text":"-Liu Feng","color":"gray","italic":true}']},Unbreakable:1b,CustomModelData:41,gun:1,sunshot:1} 1
execute as @a[tag=reloading,nbt={SelectedItem:{id:"minecraft:carrot_on_a_stick",Count:1b,tag:{gun:1,sunshot:1}}}] if score @s reloadtimer matches 19 run replaceitem entity @s weapon.mainhand minecraft:carrot_on_a_stick{display:{Name:'{"text":"Sunshot","color":"yellow","bold":true,"italic":false}',Lore:['{"text":"\\"Can\'t outrun the sunrise.\\"","color":"gray","italic":true}','{"text":"-Liu Feng","color":"gray","italic":true}']},Unbreakable:1b,CustomModelData:42,gun:1,sunshot:1} 1
execute as @a[tag=reloading,nbt={SelectedItem:{id:"minecraft:carrot_on_a_stick",Count:1b,tag:{gun:1,sunshot:1}}}] if score @s reloadtimer matches 20 run replaceitem entity @s weapon.mainhand minecraft:carrot_on_a_stick{display:{Name:'{"text":"Sunshot","color":"yellow","bold":true,"italic":false}',Lore:['{"text":"\\"Can\'t outrun the sunrise.\\"","color":"gray","italic":true}','{"text":"-Liu Feng","color":"gray","italic":true}']},Unbreakable:1b,CustomModelData:43,gun:1,sunshot:1} 1
execute as @a[tag=reloading,nbt={SelectedItem:{id:"minecraft:carrot_on_a_stick",Count:1b,tag:{gun:1,sunshot:1}}}] if score @s reloadtimer matches 21 run replaceitem entity @s weapon.mainhand minecraft:carrot_on_a_stick{display:{Name:'{"text":"Sunshot","color":"yellow","bold":true,"italic":false}',Lore:['{"text":"\\"Can\'t outrun the sunrise.\\"","color":"gray","italic":true}','{"text":"-Liu Feng","color":"gray","italic":true}']},Unbreakable:1b,CustomModelData:44,gun:1,sunshot:1} 1
execute as @a[tag=reloading,nbt={SelectedItem:{id:"minecraft:carrot_on_a_stick",Count:1b,tag:{gun:1,sunshot:1}}}] if score @s reloadtimer matches 22 run replaceitem entity @s weapon.mainhand minecraft:carrot_on_a_stick{display:{Name:'{"text":"Sunshot","color":"yellow","bold":true,"italic":false}',Lore:['{"text":"\\"Can\'t outrun the sunrise.\\"","color":"gray","italic":true}','{"text":"-Liu Feng","color":"gray","italic":true}']},Unbreakable:1b,CustomModelData:45,gun:1,sunshot:1} 1
execute as @a[tag=reloading,nbt={SelectedItem:{id:"minecraft:carrot_on_a_stick",Count:1b,tag:{gun:1,sunshot:1}}}] if score @s reloadtimer matches 23 run replaceitem entity @s weapon.mainhand minecraft:carrot_on_a_stick{display:{Name:'{"text":"Sunshot","color":"yellow","bold":true,"italic":false}',Lore:['{"text":"\\"Can\'t outrun the sunrise.\\"","color":"gray","italic":true}','{"text":"-Liu Feng","color":"gray","italic":true}']},Unbreakable:1b,CustomModelData:46,gun:1,sunshot:1} 1
execute as @a[tag=reloading,nbt={SelectedItem:{id:"minecraft:carrot_on_a_stick",Count:1b,tag:{gun:1,sunshot:1}}}] if score @s reloadtimer matches 24 run replaceitem entity @s weapon.mainhand minecraft:carrot_on_a_stick{display:{Name:'{"text":"Sunshot","color":"yellow","bold":true,"italic":false}',Lore:['{"text":"\\"Can\'t outrun the sunrise.\\"","color":"gray","italic":true}','{"text":"-Liu Feng","color":"gray","italic":true}']},Unbreakable:1b,CustomModelData:47,gun:1,sunshot:1} 1
execute as @a[tag=reloading,nbt={SelectedItem:{id:"minecraft:carrot_on_a_stick",Count:1b,tag:{gun:1,sunshot:1}}}] if score @s reloadtimer matches 25 run replaceitem entity @s weapon.mainhand minecraft:carrot_on_a_stick{display:{Name:'{"text":"Sunshot","color":"yellow","bold":true,"italic":false}',Lore:['{"text":"\\"Can\'t outrun the sunrise.\\"","color":"gray","italic":true}','{"text":"-Liu Feng","color":"gray","italic":true}']},Unbreakable:1b,CustomModelData:48,gun:1,sunshot:1} 1
execute as @a[tag=reloading,nbt={SelectedItem:{id:"minecraft:carrot_on_a_stick",Count:1b,tag:{gun:1,sunshot:1}}}] if score @s reloadtimer matches 26 run replaceitem entity @s weapon.mainhand minecraft:carrot_on_a_stick{display:{Name:'{"text":"Sunshot","color":"yellow","bold":true,"italic":false}',Lore:['{"text":"\\"Can\'t outrun the sunrise.\\"","color":"gray","italic":true}','{"text":"-Liu Feng","color":"gray","italic":true}']},Unbreakable:1b,CustomModelData:49,gun:1,sunshot:1} 1
execute as @a[tag=reloading,nbt={SelectedItem:{id:"minecraft:carrot_on_a_stick",Count:1b,tag:{gun:1,sunshot:1}}}] if score @s reloadtimer matches 27 run replaceitem entity @s weapon.mainhand minecraft:carrot_on_a_stick{display:{Name:'{"text":"Sunshot","color":"yellow","bold":true,"italic":false}',Lore:['{"text":"\\"Can\'t outrun the sunrise.\\"","color":"gray","italic":true}','{"text":"-Liu Feng","color":"gray","italic":true}']},Unbreakable:1b,CustomModelData:50,gun:1,sunshot:1} 1
execute as @a[tag=reloading,nbt={SelectedItem:{id:"minecraft:carrot_on_a_stick",Count:1b,tag:{gun:1,sunshot:1}}}] if score @s reloadtimer matches 28 run replaceitem entity @s weapon.mainhand minecraft:carrot_on_a_stick{display:{Name:'{"text":"Sunshot","color":"yellow","bold":true,"italic":false}',Lore:['{"text":"\\"Can\'t outrun the sunrise.\\"","color":"gray","italic":true}','{"text":"-Liu Feng","color":"gray","italic":true}']},Unbreakable:1b,CustomModelData:51,gun:1,sunshot:1} 1
execute as @a[tag=reloading,nbt={SelectedItem:{id:"minecraft:carrot_on_a_stick",Count:1b,tag:{gun:1,sunshot:1}}}] if score @s reloadtimer matches 29 run replaceitem entity @s weapon.mainhand minecraft:carrot_on_a_stick{display:{Name:'{"text":"Sunshot","color":"yellow","bold":true,"italic":false}',Lore:['{"text":"\\"Can\'t outrun the sunrise.\\"","color":"gray","italic":true}','{"text":"-Liu Feng","color":"gray","italic":true}']},Unbreakable:1b,CustomModelData:52,gun:1,sunshot:1} 1
execute as @a[tag=reloading,nbt={SelectedItem:{id:"minecraft:carrot_on_a_stick",Count:1b,tag:{gun:1,sunshot:1}}}] if score @s reloadtimer matches 30 run replaceitem entity @s weapon.mainhand minecraft:carrot_on_a_stick{display:{Name:'{"text":"Sunshot","color":"yellow","bold":true,"italic":false}',Lore:['{"text":"\\"Can\'t outrun the sunrise.\\"","color":"gray","italic":true}','{"text":"-Liu Feng","color":"gray","italic":true}']},Unbreakable:1b,CustomModelData:53,gun:1,sunshot:1} 1


##sound
#execute as @a[tag=reloading,nbt={SelectedItem:{id:"minecraft:carrot_on_a_stick",Count:1b,tag:{gun:1,sunshot:1}}}] at @s if score @s reloadtimer matches 11 run playsound minecraft:block.iron_door.open master @a[distance=..10] ~ ~ ~ 10 2
#execute as @a[tag=reloading,nbt={SelectedItem:{id:"minecraft:carrot_on_a_stick",Count:1b,tag:{gun:1,sunshot:1}}}] at @s if score @s reloadtimer matches 15 run playsound minecraft:block.barrel.open master @a[distance=..10] ~ ~ ~ 10 2
#execute as @a[tag=reloading,nbt={SelectedItem:{id:"minecraft:carrot_on_a_stick",Count:1b,tag:{gun:1,sunshot:1}}}] at @s if score @s reloadtimer matches 20 run playsound minecraft:entity.item_frame.remove_item master @a[distance=..10] ~ ~ ~ 10 2
#execute as @a[tag=reloading,nbt={SelectedItem:{id:"minecraft:carrot_on_a_stick",Count:1b,tag:{gun:1,sunshot:1}}}] at @s if score @s reloadtimer matches 27 run playsound minecraft:block.iron_trapdoor.close master @a[distance=..10] ~ ~ ~ 10 1
execute as @a[tag=reloading,nbt={SelectedItem:{id:"minecraft:carrot_on_a_stick",Count:1b,tag:{gun:1,sunshot:1}}}] at @s if score @s reloadtimer matches 8 run playsound minecraft:sunshotreload master @a[distance=..10] ~ ~ ~ 3

##setmag
execute as @a[tag=reloading,nbt={SelectedItem:{id:"minecraft:carrot_on_a_stick",Count:1b,tag:{gun:1,sunshot:1}}}] run function test:general/setmag
